/**
 * skylark-jsmodeler - A version of jsmodeler that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsmodeler/
 * @license MIT
 */
define(["../core/jsm"],function(t){return t.SoftwareViewer=function(){this.canvas=null,this.camera=null,this.bodies=null,this.drawer=null,this.drawMode=null,this.navigation=null},t.SoftwareViewer.prototype.Start=function(t,e){return!!this.InitCanvas(t)&&!!this.InitCamera(e)},t.SoftwareViewer.prototype.InitCanvas=function(e){return this.bodies=[],this.canvas=e,!!this.canvas&&(this.canvas instanceof HTMLCanvasElement?this.drawer=new t.CanvasDrawer(this.canvas):this.canvas instanceof SVGSVGElement&&(this.drawer=new t.SVGDrawer(this.canvas)),!!this.drawer&&(this.drawMode="Wireframe",!0))},t.SoftwareViewer.prototype.InitCamera=function(e){return this.camera=t.ValueOrDefault(e,new t.Camera),!!this.camera&&(this.navigation=new t.Navigation,!!this.navigation.Init(this.canvas,this.camera,this.Draw.bind(this),this.Resize.bind(this)))},t.SoftwareViewer.prototype.AddBody=function(t,e){this.bodies.push([t,e])},t.SoftwareViewer.prototype.RemoveBodies=function(){this.bodies=[]},t.SoftwareViewer.prototype.FitInWindow=function(){var t=this.GetBoundingSphere();this.navigation.FitInWindow(t.GetCenter(),t.GetRadius()),this.Draw()},t.SoftwareViewer.prototype.GetCenter=function(){return this.GetBoundingBox().GetCenter()},t.SoftwareViewer.prototype.GetBoundingBox=function(){var e,i,n,r,o=new t.Coord(t.Inf,t.Inf,t.Inf),a=new t.Coord(-t.Inf,-t.Inf,-t.Inf);for(e=0;e<this.bodies.length;e++)for(n=this.bodies[e][0],i=0;i<n.VertexCount();i++)r=n.GetVertex(i),o.x=t.Minimum(o.x,r.position.x),o.y=t.Minimum(o.y,r.position.y),o.z=t.Minimum(o.z,r.position.z),a.x=t.Maximum(a.x,r.position.x),a.y=t.Maximum(a.y,r.position.y),a.z=t.Maximum(a.z,r.position.z);return new t.Box(o,a)},t.SoftwareViewer.prototype.GetBoundingSphere=function(){var e,i,n,r,o,a=this.GetCenter(),s=0;for(e=0;e<this.bodies.length;e++)for(n=this.bodies[e][0],i=0;i<n.VertexCount();i++)r=n.GetVertex(i),o=a.DistanceTo(r.position),t.IsGreater(o,s)&&(s=o);return new t.Sphere(a,s)},t.SoftwareViewer.prototype.Resize=function(){this.Draw()},t.SoftwareViewer.prototype.Draw=function(){var e,i;for(this.drawer.Clear(),e=0;e<this.bodies.length;e++)i=this.bodies[e],t.DrawProjectedBody(i[0],i[1],this.camera,this.drawMode,!1,this.drawer);return!0},t});
//# sourceMappingURL=../sourcemaps/viewer/softwareviewer.js.map
