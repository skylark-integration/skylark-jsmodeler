/**
 * skylark-jsmodeler - A version of jsmodeler that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsmodeler/
 * @license MIT
 */
define(["../core/jsm"],function(e){return e.CatmullClarkSubdivisionOneIteration=function(t){var o=new e.Body,n=new e.AdjacencyInfo(t),r=[],d=[];return function(t,o,n){var r,d;for(r=0;r<n.verts.length;r++)d=t.GetVertexPosition(r),o.AddVertex(new e.BodyVertex(d.Clone()))}(t,o,n),function(t,o,n,r){var d,i,s,l,g;for(d=0;d<n.pgons.length;d++){for(s=n.pgons[d],g=new e.Coord(0,0,0),i=0;i<s.verts.length;i++)l=t.GetVertexPosition(s.verts[i]),g=e.CoordAdd(g,l);g.MultiplyScalar(1/s.verts.length),r.push(o.AddVertex(new e.BodyVertex(g)))}}(t,o,n,r),function(t,o,n,r,d){var i,s,l,g,u,a,f,x;for(i=0;i<n.edges.length;i++){if(l=n.edges[i],g=t.GetVertexPosition(l.vert1),u=t.GetVertexPosition(l.vert2),n.IsContourEdge(l))a=e.MidCoord(g,u);else{for(a=e.CoordAdd(g,u),s=0;s<2;s++)f=0===s?l.pgon1:l.pgon2,x=o.GetVertexPosition(r[f]),a=e.CoordAdd(a,x);a.MultiplyScalar(.25)}d.push(o.AddVertex(new e.BodyVertex(a)))}}(t,o,n,r,d),function(t,o,n,r){function d(e,t){t.x=e.x,t.y=e.y,t.z=e.z}function i(e,t,o,n){n.x=(e.x+2*t.x+(o-3)*n.x)/o,n.y=(e.y+2*t.y+(o-3)*n.y)/o,n.z=(e.z+2*t.z+(o-3)*n.z)/o}var s,l,g,u,a,f,x,v,y,c,p,C=[];for(g=0;g<n.edges.length;g++)s=n.edges[g],l=e.MidCoord(t.GetVertexPosition(s.vert1),t.GetVertexPosition(s.vert2)),C.push(l);for(g=0;g<n.verts.length;g++)if(a=n.verts[g],x=o.GetVertexPosition(g),n.IsContourVertex(a)){for(p=0,c=new e.Coord(0,0,0),u=0;u<a.edges.length;u++)s=a.edges[u],n.IsContourEdge(n.edges[s])&&(l=C[a.edges[u]],c.Add(l),p++);c.Add(x),p++,c.MultiplyScalar(1/p),d(c,x)}else{for(y=new e.Coord(0,0,0),c=new e.Coord(0,0,0),u=0;u<a.pgons.length;u++)f=a.pgons[u],v=o.GetVertexPosition(r[f]),y.Add(v);for(y.MultiplyScalar(1/a.pgons.length),u=0;u<a.edges.length;u++)l=C[s=a.edges[u]],c.Add(l);c.MultiplyScalar(1/a.edges.length),i(y,c,a.edges.length,x)}}(t,o,n,r),function(t,o,n,r,d){var i,s,l,g,u,a,f,x,v,y,c,p;for(y=0;y<n.pgons.length;y++)for(i=(p=n.pgons[y]).verts.length,c=0;c<i;c++)s=p.pedges[c],l=p.pedges[(c+1)%i],g=r[y],u=d[s.index],a=n.GetPolyEdgeStartVertex(l),f=d[l.index],x=new e.BodyPolygon([g,u,a,f]),v=t.GetPolygon(y),x.material=v.material,x.curved=v.curved,o.AddPolygon(x)}(t,o,n,r,d),o},e.CatmullClarkSubdivision=function(t,o){var n,r=t;for(n=0;n<o;n++)r=e.CatmullClarkSubdivisionOneIteration(r);return r},e});
//# sourceMappingURL=../sourcemaps/extras/subdivision.js.map
