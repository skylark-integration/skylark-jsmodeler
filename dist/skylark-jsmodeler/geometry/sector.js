/**
 * skylark-jsmodeler - A version of jsmodeler that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-jsmodeler/
 * @license MIT
 */
define(["../core/jsm"],function(o){return o.CoordSectorPosition2D={CoordInsideOfSector:0,CoordOnSectorEndCoord:1,CoordOutsideOfSector:2},o.SectorSectorPosition2D={SectorsDontIntersect:0,SectorsIntersectCoincident:1,SectorsIntersectEndPoint:2,SectorsIntersectOnePoint:3},o.CoordSectorPosition={CoordInsideOfSector:0,CoordOnSectorEndCoord:1,CoordOutsideOfSector:2},o.Sector2D=function(o,t){this.beg=o,this.end=t},o.Sector2D.prototype.Set=function(o,t){this.beg=o,this.end=t},o.Sector2D.prototype.GetLength=function(){return this.beg.DistanceTo(this.end)},o.Sector2D.prototype.CoordPosition=function(t){var e=t.x,r=t.y,n=this.beg.x,i=this.beg.y,s=this.end.x,c=this.end.y,d=this.GetLength();if(o.IsZero(d))return t.IsEqual(this.beg)?o.CoordSectorPosition2D.CoordOnSectorEndCoord:o.CoordSectorPosition2D.CoordOutsideOfSector;var S=((e-n)*(s-n)+(r-i)*(c-i))/(d*d);if(o.IsLower(S,0)||o.IsGreater(S,1))return o.CoordSectorPosition2D.CoordOutsideOfSector;var u=n+S*(s-n),C=i+S*(c-i);return o.IsEqual(u,e)&&o.IsEqual(C,r)?o.IsEqual(S,0)||o.IsEqual(S,1)?o.CoordSectorPosition2D.CoordOnSectorEndCoord:o.CoordSectorPosition2D.CoordInsideOfSector:o.CoordSectorPosition2D.CoordOutsideOfSector},o.Sector2D.prototype.SectorPosition=function(t,e){function r(t,e,r){return!(r.IsEqual(t)||r.IsEqual(e)||!o.IsLowerOrEqual(r.x,Math.max(t.x,e.x))||!o.IsLowerOrEqual(r.y,Math.max(t.y,e.y))||!o.IsGreaterOrEqual(r.x,Math.min(t.x,e.x))||!o.IsGreaterOrEqual(r.y,Math.min(t.y,e.y)))}var n=void 0!==e&&null!==e,i=this.beg,s=this.end,c=t.beg,d=t.end,S=i.IsEqual(c)||i.IsEqual(d),u=s.IsEqual(c)||s.IsEqual(d);if(S&&u)return o.SectorSectorPosition2D.SectorsIntersectCoincident;var C=i.x,a=i.y,I=s.x,f=s.y,y=c.x,h=c.y,l=d.x,D=d.y,P=(l-y)*(a-h)-(D-h)*(C-y),O=(I-C)*(a-h)-(f-a)*(C-y),x=(D-h)*(I-C)-(l-y)*(f-a);if(o.IsZero(x)){if(o.IsZero(P)&&o.IsZero(O)){if(r(i,s,c)||r(i,s,d)||r(c,d,i)||r(c,d,s))return o.SectorSectorPosition2D.SectorsIntersectCoincident;if(S)return n&&(e.x=i.x,e.y=i.y),o.SectorSectorPosition2D.SectorsIntersectEndPoint;if(u)return n&&(e.x=s.x,e.y=s.y),o.SectorSectorPosition2D.SectorsIntersectEndPoint}return o.SectorSectorPosition2D.SectorsDontIntersect}var E=P/x,g=O/x;return o.IsLower(E,0)||o.IsGreater(E,1)||o.IsLower(g,0)||o.IsGreater(g,1)?o.SectorSectorPosition2D.SectorsDontIntersect:S?(n&&(e.x=i.x,e.y=i.y),o.SectorSectorPosition2D.SectorsIntersectEndPoint):u?(n&&(e.x=s.x,e.y=s.y),o.SectorSectorPosition2D.SectorsIntersectEndPoint):(n&&(e.x=C+E*(I-C),e.y=a+E*(f-a)),o.SectorSectorPosition2D.SectorsIntersectOnePoint)},o.Sector2D.prototype.ProjectCoord=function(t){var e=t.x,r=t.y,n=this.beg,i=this.end,s=n.x,c=n.y,d=i.x,S=i.y,u=(d-s)*(d-s)+(S-c)*(S-c);if(o.IsZero(u))return n.Clone();var C=((d-s)*(e-s)+(S-c)*(r-c))/u;if(o.IsLower(C,0))return n.Clone();if(o.IsGreater(C,1))return i.Clone();var a=o.CoordSub2D(i,n).MultiplyScalar(C);return o.CoordAdd2D(n,a)},o.Sector2D.prototype.Clone=function(){return new o.Sector2D(this.beg.Clone(),this.end.Clone())},o.Sector=function(o,t){this.beg=o,this.end=t},o.Sector.prototype.Set=function(o,t){this.beg=o,this.end=t},o.Sector.prototype.GetLength=function(){return this.beg.DistanceTo(this.end)},o.Sector.prototype.CoordPosition=function(t){var e=t.x,r=t.y,n=t.z,i=this.beg,s=o.CoordSub(this.end,this.beg),c=i.x,d=i.y,S=i.z,u=i.x+s.x,C=i.y+s.y,a=i.z+s.z,I=(u-c)*(u-c)+(C-d)*(C-d)+(a-S)*(a-S);if(o.IsZero(I))return i.IsEqual(t)?o.CoordSectorPosition.CoordOnSectorEndCoord:o.CoordSectorPosition.CoordOutsideOfSector;var f=((u-c)*(e-c)+(C-d)*(r-d)+(a-S)*(n-S))/I,y=s.Clone().MultiplyScalar(f),h=o.CoordAdd(i,y),l=t.DistanceTo(h);return o.IsZero(l)?o.IsLower(f,0)||o.IsGreater(f,1)?o.CoordSectorPosition.CoordOutsideOfSector:o.IsEqual(f,0)||o.IsEqual(f,1)?o.CoordSectorPosition.CoordOnSectorEndCoord:o.CoordSectorPosition.CoordInsideOfSector:o.CoordSectorPosition.CoordOutsideOfSector},o.Sector.prototype.Clone=function(){return new o.Sector(this.beg.Clone(),this.end.Clone())},o.GetSectorSegmentation2D=function(t,e){var r,n,i=o.CoordSub2D(t.end,t.beg),s=t.beg.DistanceTo(t.end)/e,c=0,d=[];for(r=0;r<=e;r++)n=t.beg.Clone().Offset(i,c),d.push(n),c+=s;return d},o.GetSectorSegmentation=function(t,e){var r,n,i=o.CoordSub(t.end,t.beg),s=t.beg.DistanceTo(t.end)/e,c=0,d=[];for(r=0;r<=e;r++)n=t.beg.Clone().Offset(i,c),d.push(n),c+=s;return d},o});
//# sourceMappingURL=../sourcemaps/geometry/sector.js.map
