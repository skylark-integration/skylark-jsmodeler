{"version":3,"sources":["geometry/matrix.js"],"names":["define","JSM","MatrixIdentity","result","MatrixClone","matrix","MatrixTranspose","MatrixVectorMultiply","vector","a00","a01","a02","a03","b00","b01","b02","b03","b10","b11","b12","b13","b20","b21","b22","b23","b30","b31","b32","b33","MatrixMultiply","matrix1","matrix2","a10","a11","a12","a13","a20","a21","a22","a23","a30","a31","a32","a33","MatrixDeterminant","MatrixInvert","b04","b05","b06","b07","b08","b09","determinant","IsZero","MatrixTranslation","x","y","z","MatrixRotation","axis","angle","origo","normal","Clone","Normalize","u","v","w","u2","v2","w2","si","Math","sin","co","cos","undefined","a","b","c","MatrixRotationQuaternion","quaternion","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","MatrixRotationX","MatrixRotationY","MatrixRotationZ","ApplyTransformation","coord","resultVector","Coord","ApplyRotation"],"mappings":"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","file":"../../geometry/matrix.js","sourcesContent":["define([\"../core/jsm\"],function(JSM){\n\t/**\n\t* Function: MatrixIdentity\n\t* Description: Generates an identity matrix.\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixIdentity = function ()\n\t{\n\t\tvar result = [];\n\t\tresult[0] = 1.0;\n\t\tresult[1] = 0.0;\n\t\tresult[2] = 0.0;\n\t\tresult[3] = 0.0;\n\t\tresult[4] = 0.0;\n\t\tresult[5] = 1.0;\n\t\tresult[6] = 0.0;\n\t\tresult[7] = 0.0;\n\t\tresult[8] = 0.0;\n\t\tresult[9] = 0.0;\n\t\tresult[10] = 1.0;\n\t\tresult[11] = 0.0;\n\t\tresult[12] = 0.0;\n\t\tresult[13] = 0.0;\n\t\tresult[14] = 0.0;\n\t\tresult[15] = 1.0;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixClone\n\t* Description: Clones a matrix.\n\t* Parameters:\n\t*\tmatrix {number[16]} the source matrix\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixClone = function (matrix)\n\t{\n\t\tvar result = [];\n\t\tresult[0] = matrix[0];\n\t\tresult[1] = matrix[1];\n\t\tresult[2] = matrix[2];\n\t\tresult[3] = matrix[3];\n\t\tresult[4] = matrix[4];\n\t\tresult[5] = matrix[5];\n\t\tresult[6] = matrix[6];\n\t\tresult[7] = matrix[7];\n\t\tresult[8] = matrix[8];\n\t\tresult[9] = matrix[9];\n\t\tresult[10] = matrix[10];\n\t\tresult[11] = matrix[11];\n\t\tresult[12] = matrix[12];\n\t\tresult[13] = matrix[13];\n\t\tresult[14] = matrix[14];\n\t\tresult[15] = matrix[15];\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixTranspose\n\t* Description: Transposes a matrix.\n\t* Parameters:\n\t*\tmatrix {number[16]} the source matrix\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixTranspose = function (matrix)\n\t{\n\t\tvar result = [];\n\t\tresult[0] = matrix[0];\n\t\tresult[1] = matrix[4];\n\t\tresult[2] = matrix[8];\n\t\tresult[3] = matrix[12];\n\t\tresult[4] = matrix[1];\n\t\tresult[5] = matrix[5];\n\t\tresult[6] = matrix[9];\n\t\tresult[7] = matrix[13];\n\t\tresult[8] = matrix[2];\n\t\tresult[9] = matrix[6];\n\t\tresult[10] = matrix[10];\n\t\tresult[11] = matrix[14];\n\t\tresult[12] = matrix[3];\n\t\tresult[13] = matrix[7];\n\t\tresult[14] = matrix[11];\n\t\tresult[15] = matrix[15];\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixVectorMultiply\n\t* Description: Multiplies a matrix with a vector.\n\t* Parameters:\n\t*\tmatrix {number[16]} the matrix\n\t*\tvector {number[4]} the vector\n\t* Returns:\n\t*\t{number[4]} the result vector\n\t*/\n\tJSM.MatrixVectorMultiply = function (matrix, vector)\n\t{\n\t\tvar a00 = vector[0];\n\t\tvar a01 = vector[1];\n\t\tvar a02 = vector[2];\n\t\tvar a03 = vector[3];\n\t\tvar b00 = matrix[0];\n\t\tvar b01 = matrix[1];\n\t\tvar b02 = matrix[2];\n\t\tvar b03 = matrix[3];\n\t\tvar b10 = matrix[4];\n\t\tvar b11 = matrix[5];\n\t\tvar b12 = matrix[6];\n\t\tvar b13 = matrix[7];\n\t\tvar b20 = matrix[8];\n\t\tvar b21 = matrix[9];\n\t\tvar b22 = matrix[10];\n\t\tvar b23 = matrix[11];\n\t\tvar b30 = matrix[12];\n\t\tvar b31 = matrix[13];\n\t\tvar b32 = matrix[14];\n\t\tvar b33 = matrix[15];\n\n\t\tvar result = [];\n\t\tresult[0] = a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;\n\t\tresult[1] = a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;\n\t\tresult[2] = a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;\n\t\tresult[3] = a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixMultiply\n\t* Description: Multiplies a two matrices.\n\t* Parameters:\n\t*\tmatrix1 {number[16]} first matrix\n\t*\tmatrix2 {number[16]} second matrix\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixMultiply = function (matrix1, matrix2)\n\t{\n\t\tvar a00 = matrix1[0];\n\t\tvar a01 = matrix1[1];\n\t\tvar a02 = matrix1[2];\n\t\tvar a03 = matrix1[3];\n\t\tvar a10 = matrix1[4];\n\t\tvar a11 = matrix1[5];\n\t\tvar a12 = matrix1[6];\n\t\tvar a13 = matrix1[7];\n\t\tvar a20 = matrix1[8];\n\t\tvar a21 = matrix1[9];\n\t\tvar a22 = matrix1[10];\n\t\tvar a23 = matrix1[11];\n\t\tvar a30 = matrix1[12];\n\t\tvar a31 = matrix1[13];\n\t\tvar a32 = matrix1[14];\n\t\tvar a33 = matrix1[15];\n\t\t\n\t\tvar b00 = matrix2[0];\n\t\tvar b01 = matrix2[1];\n\t\tvar b02 = matrix2[2];\n\t\tvar b03 = matrix2[3];\n\t\tvar b10 = matrix2[4];\n\t\tvar b11 = matrix2[5];\n\t\tvar b12 = matrix2[6];\n\t\tvar b13 = matrix2[7];\n\t\tvar b20 = matrix2[8];\n\t\tvar b21 = matrix2[9];\n\t\tvar b22 = matrix2[10];\n\t\tvar b23 = matrix2[11];\n\t\tvar b30 = matrix2[12];\n\t\tvar b31 = matrix2[13];\n\t\tvar b32 = matrix2[14];\n\t\tvar b33 = matrix2[15];\n\t\t\t\n\t\tvar result = [];\n\t\tresult[0] = a00 * b00 + a01 * b10 + a02 * b20 + a03 * b30;\n\t\tresult[1] = a00 * b01 + a01 * b11 + a02 * b21 + a03 * b31;\n\t\tresult[2] = a00 * b02 + a01 * b12 + a02 * b22 + a03 * b32;\n\t\tresult[3] = a00 * b03 + a01 * b13 + a02 * b23 + a03 * b33;\n\t\tresult[4] = a10 * b00 + a11 * b10 + a12 * b20 + a13 * b30;\n\t\tresult[5] = a10 * b01 + a11 * b11 + a12 * b21 + a13 * b31;\n\t\tresult[6] = a10 * b02 + a11 * b12 + a12 * b22 + a13 * b32;\n\t\tresult[7] = a10 * b03 + a11 * b13 + a12 * b23 + a13 * b33;\n\t\tresult[8] = a20 * b00 + a21 * b10 + a22 * b20 + a23 * b30;\n\t\tresult[9] = a20 * b01 + a21 * b11 + a22 * b21 + a23 * b31;\n\t\tresult[10] = a20 * b02 + a21 * b12 + a22 * b22 + a23 * b32;\n\t\tresult[11] = a20 * b03 + a21 * b13 + a22 * b23 + a23 * b33;\n\t\tresult[12] = a30 * b00 + a31 * b10 + a32 * b20 + a33 * b30;\n\t\tresult[13] = a30 * b01 + a31 * b11 + a32 * b21 + a33 * b31;\n\t\tresult[14] = a30 * b02 + a31 * b12 + a32 * b22 + a33 * b32;\n\t\tresult[15] = a30 * b03 + a31 * b13 + a32 * b23 + a33 * b33;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixDeterminant\n\t* Description: Calculates the determinant of a matrix.\n\t* Parameters:\n\t*\tmatrix {number[16]} the source matrix\n\t* Returns:\n\t*\t{number} the determinant\n\t*/\n\tJSM.MatrixDeterminant = function (matrix)\n\t{\n\t\tvar a00 = matrix[0];\n\t\tvar a01 = matrix[1];\n\t\tvar a02 = matrix[2];\n\t\tvar a03 = matrix[3];\n\t\tvar a10 = matrix[4];\n\t\tvar a11 = matrix[5];\n\t\tvar a12 = matrix[6];\n\t\tvar a13 = matrix[7];\n\t\tvar a20 = matrix[8];\n\t\tvar a21 = matrix[9];\n\t\tvar a22 = matrix[10];\n\t\tvar a23 = matrix[11];\n\t\tvar a30 = matrix[12];\n\t\tvar a31 = matrix[13];\n\t\tvar a32 = matrix[14];\n\t\tvar a33 = matrix[15];\n\n\t\tvar b00 = a00 * a11 - a01 * a10;\n\t\tvar b01 = a00 * a12 - a02 * a10;\n\t\tvar b02 = a00 * a13 - a03 * a10;\n\t\tvar b03 = a01 * a12 - a02 * a11;\n\t\tvar b04 = a01 * a13 - a03 * a11;\n\t\tvar b05 = a02 * a13 - a03 * a12;\n\t\tvar b06 = a20 * a31 - a21 * a30;\n\t\tvar b07 = a20 * a32 - a22 * a30;\n\t\tvar b08 = a20 * a33 - a23 * a30;\n\t\tvar b09 = a21 * a32 - a22 * a31;\n\t\tvar b10 = a21 * a33 - a23 * a31;\n\t\tvar b11 = a22 * a33 - a23 * a32;\n\t\t\n\t\tvar determinant = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\t\treturn determinant;\n\t};\n\n\t/**\n\t* Function: MatrixInvert\n\t* Description: Inverts a matrix.\n\t* Parameters:\n\t*\tmatrix {number[16]} the source matrix\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixInvert = function (matrix)\n\t{\n\t\tvar a00 = matrix[0];\n\t\tvar a01 = matrix[1];\n\t\tvar a02 = matrix[2];\n\t\tvar a03 = matrix[3];\n\t\tvar a10 = matrix[4];\n\t\tvar a11 = matrix[5];\n\t\tvar a12 = matrix[6];\n\t\tvar a13 = matrix[7];\n\t\tvar a20 = matrix[8];\n\t\tvar a21 = matrix[9];\n\t\tvar a22 = matrix[10];\n\t\tvar a23 = matrix[11];\n\t\tvar a30 = matrix[12];\n\t\tvar a31 = matrix[13];\n\t\tvar a32 = matrix[14];\n\t\tvar a33 = matrix[15];\n\n\t\tvar b00 = a00 * a11 - a01 * a10;\n\t\tvar b01 = a00 * a12 - a02 * a10;\n\t\tvar b02 = a00 * a13 - a03 * a10;\n\t\tvar b03 = a01 * a12 - a02 * a11;\n\t\tvar b04 = a01 * a13 - a03 * a11;\n\t\tvar b05 = a02 * a13 - a03 * a12;\n\t\tvar b06 = a20 * a31 - a21 * a30;\n\t\tvar b07 = a20 * a32 - a22 * a30;\n\t\tvar b08 = a20 * a33 - a23 * a30;\n\t\tvar b09 = a21 * a32 - a22 * a31;\n\t\tvar b10 = a21 * a33 - a23 * a31;\n\t\tvar b11 = a22 * a33 - a23 * a32;\n\t\t\n\t\tvar determinant = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\t\tif (JSM.IsZero (determinant)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tvar result = [];\n\t\t\n\t\tresult[0] = (a11 * b11 - a12 * b10 + a13 * b09) / determinant;\n\t\tresult[1] = (a02 * b10 - a01 * b11 - a03 * b09) / determinant;\n\t\tresult[2] = (a31 * b05 - a32 * b04 + a33 * b03) / determinant;\n\t\tresult[3] = (a22 * b04 - a21 * b05 - a23 * b03) / determinant;\n\t\tresult[4] = (a12 * b08 - a10 * b11 - a13 * b07) / determinant;\n\t\tresult[5] = (a00 * b11 - a02 * b08 + a03 * b07) / determinant;\n\t\tresult[6] = (a32 * b02 - a30 * b05 - a33 * b01) / determinant;\n\t\tresult[7] = (a20 * b05 - a22 * b02 + a23 * b01) / determinant;\n\t\tresult[8] = (a10 * b10 - a11 * b08 + a13 * b06) / determinant;\n\t\tresult[9] = (a01 * b08 - a00 * b10 - a03 * b06) / determinant;\n\t\tresult[10] = (a30 * b04 - a31 * b02 + a33 * b00) / determinant;\n\t\tresult[11] = (a21 * b02 - a20 * b04 - a23 * b00) / determinant;\n\t\tresult[12] = (a11 * b07 - a10 * b09 - a12 * b06) / determinant;\n\t\tresult[13] = (a00 * b09 - a01 * b07 + a02 * b06) / determinant;\n\t\tresult[14] = (a31 * b01 - a30 * b03 - a32 * b00) / determinant;\n\t\tresult[15] = (a20 * b03 - a21 * b01 + a22 * b00) / determinant;\n\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixTranslation\n\t* Description: Creates a translation matrix.\n\t* Parameters:\n\t*\tx {number} x offset of the transformation\n\t*\ty {number} y offset of the transformation\n\t*\tz {number} z offset of the transformation\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixTranslation = function (x, y, z)\n\t{\n\t\tvar result = [];\n\t\tresult[0] = 1.0;\n\t\tresult[1] = 0.0;\n\t\tresult[2] = 0.0;\n\t\tresult[3] = 0.0;\n\t\tresult[4] = 0.0;\n\t\tresult[5] = 1.0;\n\t\tresult[6] = 0.0;\n\t\tresult[7] = 0.0;\n\t\tresult[8] = 0.0;\n\t\tresult[9] = 0.0;\n\t\tresult[10] = 1.0;\n\t\tresult[11] = 0.0;\n\t\tresult[12] = x;\n\t\tresult[13] = y;\n\t\tresult[14] = z;\n\t\tresult[15] = 1.0;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixRotation\n\t* Description: Creates a rotation matrix around the given axis.\n\t* Parameters:\n\t*\taxis {Vector} the axis of the rotation\n\t*\tangle {number} the angle of the rotation\n\t*\torigo {Coord} the origo of the rotation\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixRotation = function (axis, angle, origo)\n\t{\n\t\tvar normal = axis.Clone ().Normalize ();\n\n\t\tvar u = normal.x;\n\t\tvar v = normal.y;\n\t\tvar w = normal.z;\n\n\t\tvar u2 = u * u;\n\t\tvar v2 = v * v;\n\t\tvar w2 = w * w;\n\n\t\tvar si = Math.sin (angle);\n\t\tvar co = Math.cos (angle);\n\t\t\n\t\tvar result = [];\n\t\tif (origo === undefined || origo === null) {\n\t\t\tresult[0] = u2 + (v2 + w2) * co;\n\t\t\tresult[1] = u * v * (1.0 - co) + w * si;\n\t\t\tresult[2] = u * w * (1.0 - co) - v * si;\n\t\t\tresult[3] = 0.0;\n\t\t\tresult[4] = u * v * (1.0 - co) - w * si;\n\t\t\tresult[5] = v2 + (u2 + w2) * co;\n\t\t\tresult[6] = v * w * (1.0 - co) + u * si;\n\t\t\tresult[7] = 0.0;\n\t\t\tresult[8] = u * w * (1.0 - co) + v * si;\n\t\t\tresult[9] = v * w * (1.0 - co) - u * si;\n\t\t\tresult[10] = w2 + (u2 + v2) * co;\n\t\t\tresult[11] = 0.0;\n\t\t\tresult[12] = 0.0;\n\t\t\tresult[13] = 0.0;\n\t\t\tresult[14] = 0.0;\n\t\t\tresult[15] = 1.0;\n\t\t} else {\n\t\t\tvar a = origo.x;\n\t\t\tvar b = origo.y;\n\t\t\tvar c = origo.z;\n\t\t\n\t\t\tresult[0] = u2 + (v2 + w2) * co;\n\t\t\tresult[1] = u * v * (1.0 - co) + w * si;\n\t\t\tresult[2] = u * w * (1.0 - co) - v * si;\n\t\t\tresult[3] = 0.0;\n\t\t\tresult[4] = u * v * (1.0 - co) - w * si;\n\t\t\tresult[5] = v2 + (u2 + w2) * co;\n\t\t\tresult[6] = v * w * (1.0 - co) + u * si;\n\t\t\tresult[7] = 0.0;\n\t\t\tresult[8] = u * w * (1.0 - co) + v * si;\n\t\t\tresult[9] = v * w * (1.0 - co) - u * si;\n\t\t\tresult[10] = w2 + (u2 + v2) * co;\n\t\t\tresult[11] = 0.0;\n\t\t\tresult[12] = (a * (v2 + w2) - u * (b * v + c * w)) * (1.0 - co) + (b * w - c * v) * si;\n\t\t\tresult[13] = (b * (u2 + w2) - v * (a * u + c * w)) * (1.0 - co) + (c * u - a * w) * si;\n\t\t\tresult[14] = (c * (u2 + v2) - w * (a * u + b * v)) * (1.0 - co) + (a * v - b * u) * si;\n\t\t\tresult[15] = 1.0;\n\t\t}\n\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixRotationQuaternion\n\t* Description: Creates a rotation matrix from a given quaternion.\n\t* Parameters:\n\t*\tquaternion {number[4]} the quaternion\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixRotationQuaternion = function (quaternion)\n\t{\n\t\tvar x = quaternion[0];\n\t\tvar y = quaternion[1];\n\t\tvar z = quaternion[2];\n\t\tvar w = quaternion[3];\n\n\t\tvar x2 = x + x;\n\t\tvar y2 = y + y;\n\t\tvar z2 = z + z;\n\n\t\tvar xx = x * x2;\n\t\tvar xy = x * y2;\n\t\tvar xz = x * z2;\n\t\tvar yy = y * y2;\n\t\tvar yz = y * z2;\n\t\tvar zz = z * z2;\n\t\tvar wx = w * x2;\n\t\tvar wy = w * y2;\n\t\tvar wz = w * z2;\n\n\t\tvar result = [];\n\t\tresult[0] = 1.0 - (yy + zz);\n\t\tresult[1] = xy + wz;\n\t\tresult[2] = xz - wy;\n\t\tresult[3] = 0.0;\n\t\tresult[4] = xy - wz;\n\t\tresult[5] = 1.0 - (xx + zz);\n\t\tresult[6] = yz + wx;\n\t\tresult[7] = 0.0;\n\t\tresult[8] = xz + wy;\n\t\tresult[9] = yz - wx;\n\t\tresult[10] = 1.0 - (xx + yy);\n\t\tresult[11] = 0.0;\n\t\tresult[12] = 0.0;\n\t\tresult[13] = 0.0;\n\t\tresult[14] = 0.0;\n\t\tresult[15] = 1;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixRotationX\n\t* Description: Creates a rotation matrix around the x axis.\n\t* Parameters:\n\t*\tangle {number} the angle of rotation\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixRotationX = function (angle)\n\t{\n\t\tvar si = Math.sin (angle);\n\t\tvar co = Math.cos (angle);\n\n\t\tvar result = [];\n\t\tresult[0] = 1.0;\n\t\tresult[1] = 0.0;\n\t\tresult[2] = 0.0;\n\t\tresult[3] = 0.0;\n\t\tresult[4] = 0.0;\n\t\tresult[5] = co;\n\t\tresult[6] = si;\n\t\tresult[7] = 0.0;\n\t\tresult[8] = 0.0;\n\t\tresult[9] = -si;\n\t\tresult[10] = co;\n\t\tresult[11] = 0.0;\n\t\tresult[12] = 0.0;\n\t\tresult[13] = 0.0;\n\t\tresult[14] = 0.0;\n\t\tresult[15] = 1.0;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixRotationY\n\t* Description: Creates a rotation matrix around the y axis.\n\t* Parameters:\n\t*\tangle {number} the angle of rotation\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixRotationY = function (angle)\n\t{\n\t\tvar si = Math.sin (angle);\n\t\tvar co = Math.cos (angle);\n\n\t\tvar result = [];\n\t\tresult[0] = co;\n\t\tresult[1] = 0.0;\n\t\tresult[2] = -si;\n\t\tresult[3] = 0.0;\n\t\tresult[4] = 0.0;\n\t\tresult[5] = 1.0;\n\t\tresult[6] = 0.0;\n\t\tresult[7] = 0.0;\n\t\tresult[8] = si;\n\t\tresult[9] = 0.0;\n\t\tresult[10] = co;\n\t\tresult[11] = 0.0;\n\t\tresult[12] = 0.0;\n\t\tresult[13] = 0.0;\n\t\tresult[14] = 0.0;\n\t\tresult[15] = 1.0;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: MatrixRotationZ\n\t* Description: Creates a rotation matrix around the z axis.\n\t* Parameters:\n\t*\tangle {number} the angle of rotation\n\t* Returns:\n\t*\t{number[16]} the result matrix\n\t*/\n\tJSM.MatrixRotationZ = function (angle)\n\t{\n\t\tvar si = Math.sin (angle);\n\t\tvar co = Math.cos (angle);\n\n\t\tvar result = [];\n\t\tresult[0] = co;\n\t\tresult[1] = si;\n\t\tresult[2] = 0.0;\n\t\tresult[3] = 0.0;\n\t\tresult[4] = -si;\n\t\tresult[5] = co;\n\t\tresult[6] = 0.0;\n\t\tresult[7] = 0.0;\n\t\tresult[8] = 0.0;\n\t\tresult[9] = 0.0;\n\t\tresult[10] = 1.0;\n\t\tresult[11] = 0.0;\n\t\tresult[12] = 0.0;\n\t\tresult[13] = 0.0;\n\t\tresult[14] = 0.0;\n\t\tresult[15] = 1.0;\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: ApplyTransformation\n\t* Description: Applies a matrix transformation to a coordinate.\n\t* Parameters:\n\t*\tmatrix {number[16]} the matrix\n\t*\tcoord {Coord} the coordinate\n\t* Returns:\n\t*\t{Coord} the result\n\t*/\n\tJSM.ApplyTransformation = function (matrix, coord)\n\t{\n\t\tvar vector = [];\n\t\tvector[0] = coord.x;\n\t\tvector[1] = coord.y;\n\t\tvector[2] = coord.z;\n\t\tvector[3] = 1.0;\n\t\t\n\t\tvar resultVector = JSM.MatrixVectorMultiply (matrix, vector);\n\t\tvar result = new JSM.Coord (resultVector[0], resultVector[1], resultVector[2]);\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: ApplyRotation\n\t* Description: Applies the rotation part of a matrix transformation to a coordinate.\n\t* Parameters:\n\t*\tmatrix {number[16]} the matrix\n\t*\tcoord {Coord} the coordinate\n\t* Returns:\n\t*\t{Coord} the result\n\t*/\n\tJSM.ApplyRotation = function (matrix, coord)\n\t{\n\t\tvar vector = [];\n\t\tvector[0] = coord.x;\n\t\tvector[1] = coord.y;\n\t\tvector[2] = coord.z;\n\t\tvector[3] = 0.0;\n\t\t\n\t\tvar resultVector = JSM.MatrixVectorMultiply (matrix, vector);\n\t\tvar result = new JSM.Coord (resultVector[0], resultVector[1], resultVector[2]);\n\t\treturn result;\n\t};\n\n\treturn JSM;\n});\n"]}