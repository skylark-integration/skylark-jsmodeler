{"version":3,"sources":["geometry/transformation.js"],"names":["define","JSM","Transformation","this","matrix","MatrixIdentity","prototype","GetMatrix","SetMatrix","Append","source","MatrixMultiply","Apply","coord","ApplyTransformation","Clone","result","MatrixClone","IdentityTransformation","transformation","TranslationTransformation","translation","MatrixTranslation","x","y","z","OffsetTransformation","direction","distance","Normalize","MultiplyScalar","RotationTransformation","axis","angle","origo","MatrixRotation","RotationXTransformation","undefined","MatrixRotationX","Vector","RotationYTransformation","MatrixRotationY","RotationZTransformation","MatrixRotationZ","RotationXYZTransformation","xAngle","yAngle","zAngle"],"mappings":"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","file":"../../geometry/transformation.js","sourcesContent":["define([\"../core/jsm\"],function(JSM){\n\t/**\n\t* Class: Transformation\n\t* Description: Represents a transformation matrix.\n\t*/\n\tJSM.Transformation = function ()\n\t{\n\t\tthis.matrix = JSM.MatrixIdentity ();\n\t};\n\n\t/**\n\t* Function: Transformation.GetMatrix\n\t* Description: Returns the matrix of the transformation.\n\t* Returns:\n\t*\t{number[16]} the matrix\n\t*/\n\tJSM.Transformation.prototype.GetMatrix = function ()\n\t{\n\t\treturn this.matrix;\n\t};\n\n\t/**\n\t* Function: Transformation.SetMatrix\n\t* Description: Sets matrix of the transformation.\n\t* Parameters:\n\t*\tmatrix {number[16]} the matrix\n\t*/\n\tJSM.Transformation.prototype.SetMatrix = function (matrix)\n\t{\n\t\tthis.matrix = matrix;\n\t};\n\n\t/**\n\t* Function: Transformation.Append\n\t* Description: Adds a transformation to the matrix.\n\t* Parameters:\n\t*\tsource {Transformation} the another transformation\n\t*/\n\tJSM.Transformation.prototype.Append = function (source)\n\t{\n\t\tthis.matrix = JSM.MatrixMultiply (this.matrix, source.matrix);\n\t};\n\n\t/**\n\t* Function: Transformation.Apply\n\t* Description: Apply transformation to a coordinate.\n\t* Parameters:\n\t*\tcoord {Coord} the coordinate\n\t* Returns:\n\t*\t{Coord} the result\n\t*/\n\tJSM.Transformation.prototype.Apply = function (coord)\n\t{\n\t\treturn JSM.ApplyTransformation (this.matrix, coord);\n\t};\n\n\t/**\n\t* Function: Transformation.Clone\n\t* Description: Clones the transformation.\n\t* Returns:\n\t*\t{Transformation} a cloned instance\n\t*/\n\tJSM.Transformation.prototype.Clone = function ()\n\t{\n\t\tvar result = new JSM.Transformation ();\n\t\tresult.matrix = JSM.MatrixClone (this.matrix);\n\t\treturn result;\n\t};\n\n\t/**\n\t* Function: IdentityTransformation\n\t* Description: Generates an identity transformation.\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.IdentityTransformation = function ()\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\ttransformation.matrix = JSM.MatrixIdentity ();\n\t\treturn transformation;\n\t};\n\n\t/**\n\t* Function: TranslationTransformation\n\t* Description: Generates a translation transformation.\n\t* Parameters:\n\t*\ttranslation {Vector} the translation vector\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.TranslationTransformation = function (translation)\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\ttransformation.matrix = JSM.MatrixTranslation (translation.x, translation.y, translation.z);\n\t\treturn transformation;\n\t};\n\n\t/**\n\t* Function: OffsetTransformation\n\t* Description: Generates an offset transformation.\n\t* Parameters:\n\t*\tdirection {Vector} the direction of the offset\n\t*\tdistance {number} the distance of the offset\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.OffsetTransformation = function (direction, distance)\n\t{\n\t\tvar normal = direction.Clone ().Normalize ();\n\t\tvar translation = normal.Clone ().MultiplyScalar (distance);\n\t\treturn JSM.TranslationTransformation (translation);\n\t};\n\n\t/**\n\t* Function: RotationTransformation\n\t* Description: Generates a rotation transformation.\n\t* Parameters:\n\t*\taxis {Vector} the axis of the rotation\n\t*\tangle {number} the angle of the rotation\n\t*\torigo {Coord} the origo of the rotation\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.RotationTransformation = function (axis, angle, origo)\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\ttransformation.matrix = JSM.MatrixRotation (axis, angle, origo);\n\t\treturn transformation;\n\t};\n\n\t/**\n\t* Function: RotationXTransformation\n\t* Description: Generates a rotation transformation around the x axis.\n\t* Parameters:\n\t*\tangle {number} the angle of the rotation\n\t*\torigo {Coord} the origo of the rotation\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.RotationXTransformation = function (angle, origo)\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\tif (origo === undefined || origo === null) {\n\t\t\ttransformation.matrix = JSM.MatrixRotationX (angle);\n\t\t} else {\n\t\t\ttransformation.Append (JSM.TranslationTransformation (new JSM.Vector (-origo.x, -origo.y, -origo.z)));\n\t\t\ttransformation.Append (JSM.RotationXTransformation (angle));\n\t\t\ttransformation.Append (JSM.TranslationTransformation (new JSM.Vector (origo.x, origo.y, origo.z)));\n\t\t}\n\t\treturn transformation;\n\t};\n\n\t/**\n\t* Function: RotationYTransformation\n\t* Description: Generates a rotation transformation around the y axis.\n\t* Parameters:\n\t*\tangle {number} the angle of the rotation\n\t*\torigo {Coord} the origo of the rotation\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.RotationYTransformation = function (angle, origo)\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\tif (origo === undefined || origo === null) {\n\t\t\ttransformation.matrix = JSM.MatrixRotationY (angle);\n\t\t} else {\n\t\t\ttransformation.Append (JSM.TranslationTransformation (new JSM.Vector (-origo.x, -origo.y, -origo.z)));\n\t\t\ttransformation.Append (JSM.RotationYTransformation (angle));\n\t\t\ttransformation.Append (JSM.TranslationTransformation (new JSM.Vector (origo.x, origo.y, origo.z)));\n\t\t}\n\t\treturn transformation;\n\t};\n\n\t/**\n\t* Function: RotationZTransformation\n\t* Description: Generates a rotation transformation around the z axis.\n\t* Parameters:\n\t*\tangle {number} the angle of the rotation\n\t*\torigo {Coord} the origo of the rotation\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.RotationZTransformation = function (angle, origo)\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\tif (origo === undefined || origo === null) {\n\t\t\ttransformation.matrix = JSM.MatrixRotationZ (angle);\n\t\t} else {\n\t\t\ttransformation.Append (JSM.TranslationTransformation (new JSM.Vector (-origo.x, -origo.y, -origo.z)));\n\t\t\ttransformation.Append (JSM.RotationZTransformation (angle));\n\t\t\ttransformation.Append (JSM.TranslationTransformation (new JSM.Vector (origo.x, origo.y, origo.z)));\n\t\t}\n\t\treturn transformation;\n\t};\n\n\t/**\n\t* Function: RotationXYZTransformation\n\t* Description: Generates a rotation transformation around all axis in x, y, z order.\n\t* Parameters:\n\t*\txAngle {number} the x angle of the rotation\n\t*\tyAngle {number} the y angle of the rotation\n\t*\tzAngle {number} the z angle of the rotation\n\t*\torigo {Coord} the origo of the rotation\n\t* Returns:\n\t*\t{Transformation} the result\n\t*/\n\tJSM.RotationXYZTransformation = function (xAngle, yAngle, zAngle, origo)\n\t{\n\t\tvar transformation = new JSM.Transformation ();\n\t\ttransformation.Append (JSM.RotationXTransformation (xAngle, origo));\n\t\ttransformation.Append (JSM.RotationYTransformation (yAngle, origo));\n\t\ttransformation.Append (JSM.RotationZTransformation (zAngle, origo));\n\t\treturn transformation;\n\t};\n\n\treturn JSM;\n});\n"]}