{"version":3,"sources":["viewer/touch.js"],"names":["define","JSM","Touch","this","down","fingers","prev","Coord2D","curr","diff","prototype","Start","event","div","touches","length","SetCurrent","Clone","Move","CoordSub2D","End","GetEventCoord","touch","currX","pageX","currY","pageY","undefined","getBoundingClientRect","clientRect","left","top","window","pageXOffset","pageYOffset","distance","DistanceTo"],"mappings":";;;;;;;AAAAA,QAAQ,eAAe,SAASC,GAwE/B,OAvEAA,EAAIC,MAAQ,WAEXC,KAAKC,MAAO,EACZD,KAAKE,QAAU,EACfF,KAAKG,KAAO,IAAIL,EAAIM,QACpBJ,KAAKK,KAAO,IAAIP,EAAIM,QACpBJ,KAAKM,KAAO,IAAIR,EAAIM,SAGrBN,EAAIC,MAAMQ,UAAUC,MAAQ,SAAUC,EAAOC,GAEf,IAAzBD,EAAME,QAAQC,SAIlBZ,KAAKC,MAAO,EACZD,KAAKE,QAAUO,EAAME,QAAQC,OAE7BZ,KAAKa,WAAYJ,EAAOC,GACxBV,KAAKG,KAAOH,KAAKK,KAAKS,UAGvBhB,EAAIC,MAAMQ,UAAUQ,KAAO,SAAUN,EAAOC,GAEd,IAAzBD,EAAME,QAAQC,SAIlBZ,KAAKE,QAAUO,EAAME,QAAQC,OAE7BZ,KAAKa,WAAYJ,EAAOC,GACxBV,KAAKM,KAAOR,EAAIkB,WAAYhB,KAAKK,KAAML,KAAKG,MAC5CH,KAAKG,KAAOH,KAAKK,KAAKS,UAGvBhB,EAAIC,MAAMQ,UAAUU,IAAM,SAAUR,EAAOC,GAEb,IAAzBD,EAAME,QAAQC,SAIlBZ,KAAKC,MAAO,EACZD,KAAKa,WAAYJ,EAAOC,KAGzBZ,EAAIC,MAAMQ,UAAUM,WAAa,SAAUJ,EAAOC,GAEjD,SAASQ,EAAeC,EAAOT,GAE9B,IAAIU,EAAQD,EAAME,MACdC,EAAQH,EAAMI,MAClB,QAAkCC,IAA9Bd,EAAIe,sBAAqC,CAC5C,IAAIC,EAAahB,EAAIe,wBACrBL,GAASM,EAAWC,KACpBL,GAASI,EAAWE,IAMrB,YAJ2BJ,IAAvBK,OAAOC,kBAAoDN,IAAvBK,OAAOE,cAC9CX,GAASS,OAAOC,YAChBR,GAASO,OAAOE,aAEV,IAAIjC,EAAIM,QAASgB,EAAOE,GAGhC,GAA4B,GAAxBb,EAAME,QAAQC,QAAuC,GAAxBH,EAAME,QAAQC,OAC9CZ,KAAKK,KAAOa,EAAeT,EAAME,QAAQ,GAAID,QACvC,GAA4B,GAAxBD,EAAME,QAAQC,OAAa,CACrC,IAAIoB,EAAWd,EAAeT,EAAME,QAAQ,GAAID,GAAKuB,WAAYf,EAAeT,EAAME,QAAQ,GAAID,IAClGV,KAAKK,KAAO,IAAIP,EAAIM,QAAS4B,EAAUA,KAIlClC","file":"../../viewer/touch.js","sourcesContent":["define([\"../core/jsm\"],function(JSM){\n\tJSM.Touch = function ()\n\t{\n\t\tthis.down = false;\n\t\tthis.fingers = 0;\n\t\tthis.prev = new JSM.Coord2D ();\n\t\tthis.curr = new JSM.Coord2D ();\n\t\tthis.diff = new JSM.Coord2D ();\n\t};\n\n\tJSM.Touch.prototype.Start = function (event, div)\n\t{\n\t\tif (event.touches.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.down = true;\n\t\tthis.fingers = event.touches.length;\n\n\t\tthis.SetCurrent (event, div);\n\t\tthis.prev = this.curr.Clone ();\n\t};\n\n\tJSM.Touch.prototype.Move = function (event, div)\n\t{\n\t\tif (event.touches.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fingers = event.touches.length;\n\n\t\tthis.SetCurrent (event, div);\n\t\tthis.diff = JSM.CoordSub2D (this.curr, this.prev);\n\t\tthis.prev = this.curr.Clone ();\n\t};\n\n\tJSM.Touch.prototype.End = function (event, div)\n\t{\n\t\tif (event.touches.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.down = false;\n\t\tthis.SetCurrent (event, div);\n\t};\n\n\tJSM.Touch.prototype.SetCurrent = function (event, div)\n\t{\n\t\tfunction GetEventCoord (touch, div)\n\t\t{\n\t\t\tvar currX = touch.pageX;\n\t\t\tvar currY = touch.pageY;\n\t\t\tif (div.getBoundingClientRect !== undefined) {\n\t\t\t\tvar clientRect = div.getBoundingClientRect ();\n\t\t\t\tcurrX -= clientRect.left;\n\t\t\t\tcurrY -= clientRect.top;\n\t\t\t}\n\t\t\tif (window.pageXOffset !== undefined && window.pageYOffset !== undefined) {\n\t\t\t\tcurrX += window.pageXOffset;\n\t\t\t\tcurrY += window.pageYOffset;\n\t\t\t}\n\t\t\treturn new JSM.Coord2D (currX, currY);\n\t\t}\n\t\t\n\t\tif (event.touches.length == 1 || event.touches.length == 3) {\n\t\t\tthis.curr = GetEventCoord (event.touches[0], div);\n\t\t} else if (event.touches.length == 2) {\n\t\t\tvar distance = GetEventCoord (event.touches[0], div).DistanceTo (GetEventCoord (event.touches[1], div));\n\t\t\tthis.curr = new JSM.Coord2D (distance, distance);\n\t\t}\n\t};\n\n\treturn JSM;\n});\n"]}